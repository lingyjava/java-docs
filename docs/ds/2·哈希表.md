# 2·哈希表

- [2·哈希表](#2哈希表)
  - [哈希表是什么](#哈希表是什么)
    - [实现方式](#实现方式)
    - [映射方式](#映射方式)
    - [位置重复问题](#位置重复问题)
    - [优缺点](#优缺点)
    - [哈希碰撞](#哈希碰撞)
    - [负载因子](#负载因子)

## 哈希表是什么
哈希表（Hash Table）又叫散列表，是根据关键码值（key-value）直接进行访问的数据结构，直接根据给定的key值计算出目标位置，加快查找效率。这个映射函数就是散列函数，存放数据的表（通常是数组）就是散列表。

### 实现方式
哈希表有多种不同的实现方法，最常用的一种方法——拉链法，可以理解为“链表的数组”，如图：
![图21-哈希表拉链法结构](/docs/images/图21-哈希表拉链法结构.png)
左边很明显是个数组，数组的每个成员包括一个指针，指向一个链表的头，当然这个链表可能为空，也可能元素很多。我们根据元素的一些特征把元素分配到不同的链表中去，也是根据这些特征，找到正确的链表，再从链表中找出这个元素。

### 映射方式
假如数组A中，第i个元素里面装的key是i，那么数字3肯定是在第3个位置，数字10肯定是在第10个位置。哈希表就是利用利用这种基本的思想，建立一个从key到位置的函数，然后进行直接计算查找。Hash表在海量数据处理中有着广泛应用，查询速度非常的快，几乎是O(1)的时间复杂度。
散列函数：`f(n)`;
元素存放的位置：`f(key)`;

### 位置重复问题
如果两个字符串在哈希表中对应的位置相同怎么办，一个数组容量是有限的。解决该问题的方法很多，首先就是用链表，只要在哈希表的每个入口挂一个链表，保存所有对应的字符串就OK了。

### 优缺点
优点：哈希表中有多少数据，查找、插入、删除（有时包括删除）只需要接近常量的时间即0(1）的时间级。
缺点：基于数组的实现创建后难于扩展，某些哈希表被基本填满时，性能下降得非常严重，需要清楚表中将要存储多少数据（或者准备好定期地把数据转移到更大的哈希表中，这是个费时的过程）。

### 哈希碰撞
常用的解决方案有散列法和拉链法。散列法又分为开放寻址法和再散列法等。Java中使用的实现为拉链法，即：在每个冲突处构建链表，将所有冲突值链入链表。
需要注意的是，如果遭到恶意哈希碰撞攻击，拉链法会导致哈希表退化为链表，即所有元素都被存储在同一个节点的链表中，此时哈希表的查找速度=链表遍历查找速度=O(n)。

### 负载因子
负载因子是哈希表的重要参数，其定义为：哈希表中已存有的元素与哈希表长度的比值。
它是一个浮点数，表示哈希表目前的装满程度。由于表长是定值，而表中元素的个数越大，表中空余位置就会更少，发生碰撞的可能性也会进一步增大。
哈希表的扩容策略依赖于负载因子阈值。基于性能与空间的选择，JDK标准库将HashMap的负载因子阈值定为0.75。

