# 12·面向对象

- [12·面向对象](#12面向对象)
  - [类与对象](#类与对象)
  - [属性](#属性)
  - [封装](#封装)
  - [继承](#继承)
  - [Object](#object)
  - [多态](#多态)
  - [静态](#静态)
  - [抽象类](#抽象类)
  - [接口](#接口)



> Object-Oriented Programming：面向对象编程，以类的方式组织代码，以对象的方式封装数据。

## 类与对象

类：一类事物共同特征的抽象的模板。

对象：根据类创建的具体实例，拥有相同的方法，但各自的数据可能不同。

## 属性

全局属性： 定义在类中的属性，作用域是整个类，如果不赋值，系统会赋默认值。

局部属性：定义在方法中的属性，作用域在方法内，使用前必须赋值。当存在重名时优先选择局部变量。

## 封装

对象的所有属性必须私有化，根据实际情况再提供 `get/set` 方法访问属性。

将相同的功能代码封装为一个方法，在使用时调用。

## 继承

继承是从父类中派生出新的类（子类），子类具有父类的属性和方法，并能扩展新的功能。通过继承来删减同一类事物的相同代码。降低类之间的耦合。

继承规则：

- 在 Java 中（除了8种基本数据类型），所有的类全部直接或间接的继承 Object 类。
- Java 只允许单继承，一个类只能有一个直接父类。
- 子类继承父类非私有属性和方法，无法继承父类的构造方法。
- 子类在创建对象时先加载父类再加载子类，在子类的构造方法中会默认调用父类的无参构造方法。
- 如果子类重写了父类中的方法，不管怎么调用全部执行的是子类重写后的方法。

---

**super** 关键字，在子类中代表父类对象，可以通过 super 调用父类的方法和属性。

使用规则：

- 在子类的构造方法中调用父类的构造方法,必须写在第一行。
- private 只能被本类访问，super 也无法访问。
- super 和 this 不能同时调用构造方法。
- 在子类的方法中通过 super 调用父类的属性以及方法。先执行父类的静态方法-->子类的静态方法-->父类的非静态方法-->子类的非静态方法。

---

**this** 关键字，表示本类对象，在构造方法中区分局部变量和全局变量，在方法中调用本类的另一个方法。

**instanceof** 关键字，判断有无父子关系。

## Object

所有类的直接或间接父类。

Object 下的方法： 

- hashCode()：返回对象的哈希码值。
- finalize()：当垃圾回收确定不再有对象的引用时，垃圾收集器在对象上调用该对象。
- toString()：返回对象的字符串表示形式。
- equals()：指示一些其他对象是否等于此。

## 多态

对象的多种形态，同一方法可以根据发送对象的不同而采用多种不同的行为方式。实现不改变原有的代码，增加新的功能。让程序可以选择多个运行状态，这就是多态性。

程序中定义的引用变量指向的具体类型和发出的方法调用在编译时无法确定，在程序运行时才确定。

---

特点：

1. 多态建立在继承关系上。如果子类重写了父类中的方法，父类的引用在调用该方法时是子类重写后的方法。(多态实现原理)

2. 父类的引用只能调用父类的方法，不能调用子类独有的方法。

3. 子类类型可以自动转换为父类类型，但是父类类型需要强制类型转换为子类。

4. 优点：清除类型之间的耦合关系，可扩充性，接口性，灵活性，简化性。

   

```java
public class Test {

    public static void main(String[] args) {
        Animal dog = new Dog();
        Animal cat = new Cat();

        Feeder feeder = new Feeder();
        feeder.feed(dog);
        feeder.feed(cat);
    }
    // 吃了一根骨头
    // 吃了一条鱼
}

abstract class Animal {
    public abstract void eat();
}

class Dog extends Animal {
    @Override
    public void eat() {
        System.out.println("吃了一根骨头");
    }
}

class Cat extends Animal {
    @Override
    public void eat() {
        System.out.println("吃了一条鱼");
    }
}
class Feeder {
    public void feed(Animal animal) {
        animal.eat();
    }
}
```

## 静态

使用 static 修饰的属性和方法是类成员，所有该类实例共享的属性。

特点：

1. 静态区和程序一起加载，在类加载时就执行，此时还没有创建对象实例。
2. 静态成员无论创建多少个对象，只会执行一次，因为类只加载一次。
3. 静态方法/变量直接用 `类名.` 调用/访问。
4. 静态方法中无法调用普通方法，也无法使用 this 和 super 关键字。

---

非static修饰的普通属性和方法，必须使用实例对象调用。

---

静态代码块 `static{}:` 用于给静态变量赋初始值，随着类加载一起执行。

## 抽象类

使用 abstract 修饰的类，如果一个类中没有包含足够的信息来描绘一个具体的对象，这样的类就可以设计为抽象类。抽象类不能创建对象，唯一的作用是为了让子类继承，并且必须实现父类的抽象方法。

抽象方法没有方法体（没有大括号），当父类中的方法必须让子类重写，那么可以定义为抽象方法，该类也就定义为抽象类。

抽象类不一定有抽象方法，有抽象方法一定是抽象类。

## 接口

使用 interface 修饰，是一系列方法的声明。

特点：

1. 类使用 implement 实现接口，可以实现多个接口，一个接口可以继承多个接口。

2. 接口中的属性全部是常量，方法全部是抽象方法，不能有普通方法，子类必须重写接口中的所有方法。

3. 继承和实现可以同时使用，实现写在继承后。

4. 接口不能用来创建对象。

